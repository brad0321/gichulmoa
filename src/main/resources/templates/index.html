<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>공인중개사 기출모아 - 로그인</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        :root{
            /* 브랜드 팔레트 */
            --color-main:#2F4858;   /* Deep Teal Blue */
            --color-sub:#4F7CAC;    /* Smoky Blue */
            --color-point:#F5CD90;  /* Warm Pastel Yellow */
            --text-main:#2C3E3F;    /* Dark Charcoal */
            --text-sub:#7A746E;     /* Warm Gray */
            --bg:#F4F3F1;           /* Warm Light Gray */
            --white:#ffffff;

            --radius:18px;
            --shadow:0 10px 24px rgba(47,72,88,0.15);
        }

        body{
            background: var(--bg);
            color: var(--text-main);
            font-family: 'Noto Sans KR', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            letter-spacing:.1px;
        }

        .auth-wrap{
            max-width: 420px;
            margin: clamp(32px,6vh,72px) auto;
        }

        .brand{
            text-align:center;
            margin-bottom:18px;
        }
        .brand img{
            height:60px;
            margin-bottom:8px;
        }
        .brand .title{
            font-weight:800;
            font-size: 22px;
            color: var(--text-main);
        }
        .brand .subtitle{
            font-size:12px;
            color: var(--text-sub);
        }

        .card-auth{
            border:0;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            background: var(--white);
            padding: 22px;
        }

        .form-label{ font-weight:700; color: var(--text-main); }
        .form-control{
            border-radius:12px;
            padding: 10px 12px;
            border:1px solid #d9d6d1;
            background:#fff;
            color: var(--text-main);
        }
        .form-control:focus{
            border-color: var(--color-sub);
            box-shadow: 0 0 0 .2rem rgba(79,124,172,.15);
        }

        /* 버튼 공통: 중간 크기 통일 */
        .btn-uniform{
            padding: 10px 14px;
            min-height: 44px;     /* a, button 모두 동일 높이 보장 */
            border-radius:12px;
            font-weight:700;
            font-size: 1rem;
        }

        .btn-main{
            background: var(--color-main);
            border-color: var(--color-main);
            color:#fff;
        }
        .btn-main:hover{
            background:#243946;
            border-color:#243946;
        }

        .btn-sub{
            background: var(--color-sub);
            border-color: var(--color-sub);
            color:#fff;
        }
        .btn-sub:hover{
            background:#426d96;
            border-color:#426d96;
        }

        .btn-ghost{
            border:1px solid #c9c4bd;
            background:transparent;
            color: var(--text-main);
        }
        .btn-ghost:hover{
            background:#f0efec;
        }

        .links a{
            color: var(--color-sub);
            text-decoration:none;
            font-weight:600;
        }
        .links a:hover{ text-decoration:underline; }

        .alert-auth{
            border-radius:12px;
            border:1px solid #f2cbc7;
            background:#fff3f2;
            color:#8a2a22;
        }

        .foot-note{
            text-align:center;
            color: var(--text-sub);
            font-size:12px;
            margin-top:14px;
        }
    </style>
</head>
<body>

<main class="auth-wrap">
    <!-- 로고 / 심볼 이미지 -->
    <div class="brand">
        <img src="/img/brandLogo.png" alt="공인중개사 기출모아 로고">
        <div class="title">공인중개사 기출모아</div>
        <span class="subtitle">기출 기반 학습에 최적화된 PWA</span>
    </div>

    <!-- 로그인 카드 -->
    <section class="card-auth">
        <h2 class="h5 mb-3 fw-bold" style="color:var(--color-main)">로그인</h2>

        <!-- 로그인 실패 메시지 -->
        <div th:if="${loginError}" class="alert alert-auth py-2 px-3 mb-3" role="alert">
            <small th:text="${loginError}">아이디 또는 비밀번호를 확인하세요.</small>
        </div>

        <!-- 로그인 폼 -->
        <form th:action="@{/login}" method="post" id="loginForm" novalidate>
            <!-- Spring Security CSRF 사용 시 자동 렌더 -->
            <input type="hidden" th:if="${_csrf}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

            <div class="mb-3">
                <label for="username" class="form-label">아이디</label>
                <input type="text" id="username" name="username" class="form-control"
                       placeholder="아이디 입력" autocomplete="username" required>
                <div class="invalid-feedback">아이디를 입력하세요.</div>
            </div>

            <div class="mb-3">
                <label for="password" class="form-label">비밀번호</label>
                <input type="password" id="password" name="password" class="form-control"
                       placeholder="비밀번호 입력" autocomplete="current-password" required>
                <div class="invalid-feedback">비밀번호를 입력하세요.</div>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="rememberMe" name="remember-me">
                    <label class="form-check-label" for="rememberMe" style="color:var(--text-sub)">자동 로그인</label>
                </div>
                <div class="links small">
                    <a th:href="@{/members/find-username}" class="me-2">아이디 찾기</a>
                    <span class="text-muted">|</span>
                    <a th:href="@{/members/find-password}" class="ms-2">비밀번호 찾기</a>
                </div>
            </div>

            <button type="submit" class="btn btn-main btn-uniform w-100">로그인</button>
        </form>

        <!-- 보조 액션 -->
        <div class="d-grid gap-2 mt-3">
            <a th:href="@{/members/new}" class="btn btn-sub btn-uniform">회원가입</a>
            <a th:href="@{/guest/start}" class="btn btn-ghost btn-uniform">비회원 시작하기</a>
        </div>
    </section>

    <p class="foot-note">© 공인중개사 기출모아</p>
</main>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- 간단 검증 & 제출 중 버튼 잠금 -->
<script>
    (function(){
        const $ = (s, p=document) => p.querySelector(s);
        const form = $("#loginForm");
        const username = $("#username");
        const password = $("#password");

        username && username.focus();

        form?.addEventListener("submit", (e) => {
            let ok = true;
            if(!username.value.trim()){ username.classList.add("is-invalid"); ok = false; }
            else username.classList.remove("is-invalid");
            if(!password.value.trim()){ password.classList.add("is-invalid"); ok = false; }
            else password.classList.remove("is-invalid");

            if(!ok){ e.preventDefault(); return; }

            const btn = form.querySelector('button[type="submit"]');
            if(btn){
                btn.setAttribute("disabled", "disabled");
                btn.textContent = "로그인 중…";
            }
        });
    })();
</script>
</body>
</html>
